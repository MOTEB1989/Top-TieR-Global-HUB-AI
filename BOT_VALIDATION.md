# ุฏููู ุงูุชุญูู ูู ุจูุช ุชูููุฌุฑุงู
# Bot Validation Guide

## ูุธุฑุฉ ุนุงูุฉ - Overview

ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ุงูุชุญูู ูู ุตุญุฉ ุนูู ุจูุช ุชูููุฌุฑุงู ุจุนุฏ ุงูุฅุตูุงุญุงุช ุงูุฃูููุฉ ูุงูุชุญุณููุงุช.

This guide explains how to validate the Telegram bot after security refactoring and improvements.

---

## ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ - Prerequisites

### 1. ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ุงููุทููุจุฉ

ูุฌุจ ุชุนููู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ูู ููู \`.env\` ุฃู ูู ุจูุฆุฉ ุงูุชุดุบูู:

\`\`\`bash
# ุฅูุฒุงูู - Required
TELEGRAM_BOT_TOKEN=your_bot_token_here
OPENAI_API_KEY=your_openai_key_here
OPENAI_MODEL=gpt-4o-mini
GITHUB_REPO=MOTEB1989/Top-TieR-Global-HUB-AI

# ุงุฎุชูุงุฑู - Optional
OPENAI_FALLBACK_MODEL=gpt-3.5-turbo
TELEGRAM_ALLOWLIST=your_user_id_here
TELEGRAM_RATE_LIMIT_PER_MIN=20
\`\`\`

### 2. ุชุซุจูุช ุงูููุชุจุงุช

\`\`\`bash
pip install -r requirements.txt
\`\`\`

---

## ุงูุฎุทูุฉ 1: ุงูุชุญูู ูู ุงูุจูุฆุฉ - Environment Verification

### ุฃ) ุงูุชุญูู ุงูุฃุณุงุณู

\`\`\`bash
python scripts/verify_env.py
\`\`\`

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ**:
\`\`\`
============================================================
โ ุฌููุน ุงููุชุบูุฑุงุช ุงูุญุฑุฌุฉ ููุฌูุฏุฉ (All Critical Variables Present)
============================================================
ุนุฑุถ ุขูู (Safe Display):

  TELEGRAM_BOT_TOKEN           = 123456...wxyz
  OPENAI_API_KEY              = sk-pro...f123
  OPENAI_MODEL                = gpt-4o-mini
  GITHUB_REPO                 = MOTEB1989/Top-TieR-Global-HUB-AI
\`\`\`

### ุจ) ุงููุถุน ุงูุตุงุฑู (Strict Mode)

\`\`\`bash
python scripts/verify_env.py --strict
\`\`\`

ูุฐุง ุงููุถุน ููุดู ุฅุฐุง ูุงูุช ููุงู ููู ูุคูุชุฉ ูุซู \`PASTE_YOUR_KEY_HERE\`.

---

## ุงูุฎุทูุฉ 2: ุงูุชุดุบูู ุงูุชุฌุฑูุจู - Dry Run

### ุงูุชุญูู ูู ุงูุชูููู ุจุฏูู ุชุดุบูู ุงูุจูุช

\`\`\`bash
python scripts/telegram_chatgpt_mode.py --dry-run
\`\`\`

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ**:
\`\`\`
============================================================
๐ค Telegram ChatGPT Bot - Mode: refactored
============================================================
============================================================
๐ค OpenAI Model Configuration
============================================================
  Primary Model:  gpt-4o-mini
  Fallback Model: gpt-3.5-turbo
============================================================
โฑ๏ธ Rate limiting: 20 messages/user/minute
============================================================
โ Dry run successful - configuration valid
============================================================
\`\`\`

---

## ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงููููุฐุฌ ุงูุงุญุชูุงุทู - Fallback Model Test

\`\`\`bash
python scripts/telegram_chatgpt_mode.py --force-fallback --dry-run
\`\`\`

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ**:
\`\`\`
โ๏ธ Force fallback mode enabled
...
โ Dry run successful - configuration valid
\`\`\`

---

## ุงูุฎุทูุฉ 4: ุงูุชุญูู ุงูุดุงูู - Comprehensive Check

\`\`\`bash
bash scripts/post_refactor_check.sh
\`\`\`

**ุงููุญูุตุงุช ุงููุดูููุฉ**:
1. โ ุงูุชุญูู ูู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ
2. โ ุงูุชุญูู ูู ุตุญุฉ ุงูุงุณุชูุฑุงุฏ
3. โ ุงูุชุดุบูู ุงูุชุฌุฑูุจู
4. โ ูุญุงูุงุฉ ุงููููุฐุฌ ุงูุงุญุชูุงุทู
5. โ ุชูููุฉ ุฃุณูุงุก ุงููููุงุช
6. โ ุงุฎุชุจุงุฑ ุชุญุฏูุฏ ุงููุนุฏู
7. โ ุฅุฎูุงุก ุงูุฃุณุฑุงุฑ
8. โ ุงุดุชูุงู ููุชุงุญ ุงูุชุดููุฑ

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ ุนูุฏ ุงููุฌุงุญ**:
\`\`\`
==========================================
๐ Summary
==========================================
โ Passed: 8
โ Failed: 0

๐ All checks PASSED! Refactor validated successfully.
\`\`\`

---

## ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงูุจูุช ูุจุงุดุฑุฉ - Live Bot Testing

### ุฃ) ุชุดุบูู ุงูุจูุช

\`\`\`bash
python scripts/telegram_chatgpt_mode.py --mode=refactored
\`\`\`

### ุจ) ุงูุงุฎุชุจุงุฑุงุช ุงููุธูููุฉ

#### 1. ุงุฎุชุจุงุฑ /whoami
**ุงูุฅุฌุฑุงุก**: ุฃุฑุณู \`/whoami\` ุฅูู ุงูุจูุช ูู ุชูููุฌุฑุงู

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ**:
\`\`\`
๐ ูุนุฑูู ูู ุชูููุฌุฑุงู: \`123456789\`
๐ค ุงุณู ุงููุณุชุฎุฏู: @username

ุฃุถู ูุฐุง ุงููุนุฑู ูู TELEGRAM_ALLOWLIST (ููุซุงู):
TELEGRAM_ALLOWLIST=123456789
\`\`\`

#### 2. ุงุฎุชุจุงุฑ /status
**ุงูุฅุฌุฑุงุก**: ุฃุฑุณู \`/status\` ุฅูู ุงูุจูุช

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ**:
\`\`\`
๐ *ุญุงูุฉ ุงููุธุงู โ ChatGPT Mode*
- ุงููุณุชูุฏุน: \`MOTEB1989/Top-TieR-Global-HUB-AI\`
๐ง OpenAI: โ ูุถุจูุท (OPENAI_API_KEY ููุฌูุฏ)
   โข ุงููููุฐุฌ: \`gpt-4o-mini\`
๐ Allowlist: โ ููุนูู
   โข ุงููุณุชุฎุฏููู ุงููุตุฑุญ ููู:
     - 123456789
\`\`\`

#### 3. ุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู ุงููุตูุฉ
**ุงูุฅุฌุฑุงุก**: ุฃุฑุณู ุฑุณุงูุฉ ูุตูุฉ ุจุณูุทุฉ (ุจุฏูู ุฃูุฑ /)

**ูุซุงู**: \`ูุง ูู Dockerุ\`

**ุงููุชููุน**: ูุฌุจ ุฃู ูุฑุฏ ุงูุจูุช ุจุงุณุชุฎุฏุงู ุงููููุฐุฌ ุงูุฃุณุงุณู (PRIMARY_MODEL).

#### 4. ุงุฎุชุจุงุฑ /chat
**ุงูุฅุฌุฑุงุก**: ุฃุฑุณู \`/chat ูุง ูู ุญุงูุฉ ุงููุณุชูุฏุนุ\`

**ุงููุชููุน**: ุฑุฏ ุชูุงุนูู ูุน ุญูุธ ุงูุณูุงู ูู ุงูุชุงุฑูุฎ.

---

## ุงูุฎุทูุฉ 6: ุงุฎุชุจุงุฑ ุงููููุฐุฌ ุงูุงุญุชูุงุทู ุงููุจุงุดุฑ - Live Fallback Test

### ุณููุงุฑูู: ูููุฐุฌ ุฃุณุงุณู ุบูุฑ ุตุงูุญ

1. **ุชุนููู ูููุฐุฌ ุบูุฑ ุตุงูุญ**:
   \`\`\`bash
   export OPENAI_MODEL=invalid-model-name
   export OPENAI_FALLBACK_MODEL=gpt-3.5-turbo
   \`\`\`

2. **ุชุดุบูู ุงูุจูุช**:
   \`\`\`bash
   python scripts/telegram_chatgpt_mode.py --mode=refactored
   \`\`\`

3. **ุฅุฑุณุงู ุฑุณุงูุฉ**:
   ุฃุฑุณู ุฑุณุงูุฉ ูุตูุฉ ุฅูู ุงูุจูุช.

4. **ุงููุชููุน**:
   - ูุญุงูู ุงูุจูุช ุงุณุชุฎุฏุงู \`invalid-model-name\`
   - ููุดู ูุน ุฎุทุฃ 404 ุฃู 400
   - ูุญุงูู ุชููุงุฆูุงู \`gpt-3.5-turbo\` (ูุญุงููุฉ ูุงุญุฏุฉ ููุท)
   - ูุฑุฏ ุจูุฌุงุญ ุจุงุณุชุฎุฏุงู ุงููููุฐุฌ ุงูุงุญุชูุงุทู

5. **ูู ุงูุณุฌูุงุช (Logs)**:
   \`\`\`
   ERROR: ุฎุทุฃ ูู OpenAI: 404 - Model not found
   INFO: Attempting fallback to gpt-3.5-turbo
   INFO: Response from model gpt-3.5-turbo: 150 chars
   \`\`\`

---

## ุงูุฎุทูุฉ 7: ุงุฎุชุจุงุฑ ุชุญุฏูุฏ ุงููุนุฏู - Rate Limiting Test

### ุงูุณููุงุฑูู: ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ููุฑุณุงุฆู

1. **ุฅุนุฏุงุฏ ุญุฏ ููุฎูุถ ููุงุฎุชุจุงุฑ**:
   \`\`\`bash
   export TELEGRAM_RATE_LIMIT_PER_MIN=3
   python scripts/telegram_chatgpt_mode.py --mode=refactored
   \`\`\`

2. **ุฅุฑุณุงู ุฑุณุงุฆู ูุชุนุฏุฏุฉ**:
   ุฃุฑุณู 5 ุฑุณุงุฆู ูุตูุฉ ูู ุฃูู ูู ุฏูููุฉ.

3. **ุงููุชููุน**:
   - ุงูุฑุณุงุฆู 1-3: ุฑุฏูุฏ ุนุงุฏูุฉ
   - ุงูุฑุณุงุฆู 4-5: ุฑุณุงูุฉ ุชุญุฏูุฏ ุงููุนุฏู

   \`\`\`
   โ๏ธ ุชุฌุงูุฒุช ุงูุญุฏ ุงูุฃูุตู ููุฑุณุงุฆู (3 ุฑุณุงูุฉ/ุฏูููุฉ)
   Rate limit exceeded (3 messages/minute)
   โฑ๏ธ ุงูุชุธุฑ 45 ุซุงููุฉ / Wait 45 seconds
   \`\`\`

---

## ุงูุฎุทูุฉ 8: ุงุฎุชุจุงุฑ ุชุญููู ุงููููุงุช - File Upload Test

### ุฃ) ููู ุตุงูุญ (ูุตูุ ุฃูู ูู 2MB)

1. **ุฅุฑุณุงู ููู**: ุฃุฑุณู ููู ูุตู ุตุบูุฑ (ูุซู \`.txt\` ุฃู \`.py\`)

2. **ุงููุชููุน**: ุชุญููู ูุญุชูู ุงูููู ูุงูุฑุฏ ุจููุฎุต.

### ุจ) ููู ูุจูุฑ (ุฃูุจุฑ ูู 2MB)

1. **ุฅุฑุณุงู ููู**: ุฃุฑุณู ูููุงู ุฃูุจุฑ ูู 2MB

2. **ุงููุชููุน**:
   \`\`\`
   โ File too large: 3.50MB (max: 2MB)
   \`\`\`

### ุฌ) ุงุณู ููู ุฎุทูุฑ

ุฅุฐุง ุฃุฑุณูุช ูููุงู ุจุงุณู \`../../../etc/passwd\`:

**ูู ุงูุณุฌูุงุช**:
\`\`\`
INFO: Sanitized filename: ../../../etc/passwd -> passwd
\`\`\`

---

## ุงูุฎุทูุฉ 9: ุงุฎุชุจุงุฑ ุฅุฎูุงุก ุงูุฃุณุฑุงุฑ - Secret Masking Test

### ูู ุงูุณุฌูุงุช ุนูุฏ ุจุฏุก ุงูุชุดุบูู:

\`\`\`bash
python scripts/telegram_chatgpt_mode.py --mode=refactored 2>&1 | grep -E "TOKEN|KEY|PASSWORD"
\`\`\`

**ุงููุชููุน**: ูุฌุจ ุนุฏู ุนุฑุถ ุงูููู ุงููุงููุฉ ููุฃุณุฑุงุฑ:
\`\`\`
TELEGRAM_BOT_TOKEN = 123456...wxyz
OPENAI_API_KEY = sk-pro...f123
\`\`\`

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ - Common Troubleshooting

### ุฎุทุฃ: "OPENAI_MODEL is required"

**ุงูุญู**:
\`\`\`bash
export OPENAI_MODEL=gpt-4o-mini
python scripts/verify_env.py
\`\`\`

### ุฎุทุฃ: "ImportError: No module named 'lib.common'"

**ุงูุญู**:
\`\`\`bash
# ุชุฃูุฏ ูู ูุฌูุฏ ููู __init__.py
ls scripts/lib/__init__.py

# ุฅุนุงุฏุฉ ุงูุชุซุจูุช
pip install -r requirements.txt
\`\`\`

### ุฎุทุฃ: "openai.error.InvalidRequestError: model not found"

**ุงูุญู**:
\`\`\`bash
# ุชุญูู ูู ุงุณู ุงููููุฐุฌ
echo $OPENAI_MODEL

# ุงุถุจุท ูููุฐุฌุงู ุตุงูุญุงู
export OPENAI_MODEL=gpt-4o-mini
\`\`\`

### ุงูุจูุช ูุง ูุณุชุฌูุจ

**ุงูุชุญูู**:
\`\`\`bash
# 1. ุชุญูู ูู ุงูุชูููู
python scripts/verify_env.py

# 2. ุงุฎุชุจุงุฑ ุงูุชุดุบูู ุงูุชุฌุฑูุจู
python scripts/telegram_chatgpt_mode.py --dry-run

# 3. ุชุญูู ูู ุงูุณุฌูุงุช
python scripts/telegram_chatgpt_mode.py --mode=refactored 2>&1 | tee bot.log
\`\`\`

---

## ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ - Final Checklist

- [ ] โ \`verify_env.py\` ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] โ \`--dry-run\` ููุฌุญ
- [ ] โ \`post_refactor_check.sh\` ูู ุงููุญูุตุงุช ุชูุฑ
- [ ] โ ุงูุจูุช ูุณุชุฌูุจ ูู \`/whoami\`
- [ ] โ ุงูุจูุช ูุณุชุฌูุจ ูู \`/status\`
- [ ] โ ุงูุฑุณุงุฆู ุงููุตูุฉ ุชุนูู
- [ ] โ ุงููููุฐุฌ ุงูุงุญุชูุงุทู ูุนูู ุนูุฏ ุงููุดู
- [ ] โ ุชุญุฏูุฏ ุงููุนุฏู ูููุน ุงูุฑุณุงุฆู ุงูุฒุงุฆุฏุฉ
- [ ] โ ุงููููุงุช ุงููุจูุฑุฉ ุชุฑูุถ
- [ ] โ ุฃุณูุงุก ุงููููุงุช ุชูููู ุจุดูู ุตุญูุญ
- [ ] โ ุงูุฃุณุฑุงุฑ ูุฎููุฉ ูู ุงูุณุฌูุงุช

---

## ุงูุฎุทูุงุช ุงูุชุงููุฉ - Next Steps

ุจุนุฏ ุงูุชุญูู ุงููุงุฌุญ:

1. **ุงูุชุทููุฑ (Deployment)**:
   \`\`\`bash
   # Railway
   railway up
   
   # ุฃู ุงุณุชุฎุฏู railway.json ุงููุญุฏุซ
   \`\`\`

2. **ุงููุฑุงูุจุฉ (Monitoring)**:
   - ุฑุงูุจ ุงูุณุฌูุงุช ูุฑุตุฏ ุงูุฃุฎุทุงุก
   - ุชุญูู ูู ุงุณุชุฎุฏุงู ุงููููุฐุฌ ุงูุงุญุชูุงุทู
   - ุฑุงูุจ ุญุงูุงุช ุชุญุฏูุฏ ุงููุนุฏู

3. **ุงูุฃูุงู (Security)**:
   - ุฑุงุฌุน \`SECURITY_ACTION_PLAN.md\` ููุฎุทูุงุช ุงูุฃูููุฉ
   - ุชุฃูุฏ ูู \`TELEGRAM_ALLOWLIST\` ููุนูู ูู ุงูุฅูุชุงุฌ
   - ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ ูู ููุงุนุฏ ุงูุจูุงูุงุช

---

## ุงูุฏุนู - Support

ูููุฒูุฏ ูู ุงููุนูููุงุช:
- \`SCRIPTS_OVERVIEW.md\` - ูุธุฑุฉ ุนุงูุฉ ุนูู ุฌููุน ุงูุณูุฑุจุชุงุช
- \`SECURITY_ACTION_PLAN.md\` - ุฎุทุฉ ุงูุฃูุงู
- \`README.md\` - ุงููุซุงุฆู ุงูุฑุฆูุณูุฉ

---

**ููุงุญุธุฉ**: ูุฐุง ุงูุฏููู ููุชุฑุถ ุฃูู ุชุณุชุฎุฏู ุงูุฅุตุฏุงุฑ ุงูููุญุฏููุซ ุจุนุฏ ุงูุฅุตูุงุญ ุงูุฃููู. ุฅุฐุง ููุช ุชุณุชุฎุฏู ุฅุตุฏุงุฑุงู ูุฏููุงูุ ุจุนุถ ุงูููุฒุงุช ูุฏ ูุง ุชููู ูุชุงุญุฉ.
