# ุณูุฑ ุนูู ูุฅุฌุฑุงุก ุงููุญุต ุงูุฐุงุชู ูุงูุฅุตูุงุญ ุงูุชููุงุฆู ุจุดูู ุฏูุฑู
# Autonomous Self-Healing & Auto-Fix Workflow

name: '๐ค Agent: Self-Healing'

on:
  # ูุดุชุบู ูู 24 ุณุงุนุฉ (ูู ููุชุตู ุงูููู UTC)
  schedule:
    - cron: '0 0 * * *'
  # ูุณูุญ ุจุงูุชุดุบูู ุงููุฏูู ูู ูุงุฌูุฉ GitHub Actions
  workflow_dispatch:

jobs:
  run-auto-fix:
    runs-on: ubuntu-latest
    permissions:
      # ุฅุนุทุงุก ุตูุงุญูุฉ ููุชุงุจุฉ ุงููููุงุช ูุฏูุนูุง
      contents: write
      # ุฅุนุทุงุก ุตูุงุญูุฉ ูุฅูุดุงุก Pull Requests
      pull-requests: write

    steps:
      - name: 'Checkout Repository'
        uses: actions/checkout@v4

      - name: 'Setup Python Environment'
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # ููุงุญุธุฉ: ุฅุฐุง ูุงูุช ููุงู ููุชุจุงุช ุจุงูุซูู ูุทููุจุฉุ ุฃุถู ุฎุทูุฉ ุชุซุจูุช ููุง
      # - name: 'Install Python Dependencies'
      #   run: pip install -r requirements.txt

      - name: 'Make scripts executable'
        run: |
          chmod +x run_auto_fix.sh
          chmod +x auto_pr.sh
          # ุชุฃูุฏ ูู ุฃู self_heal.sh ูุงุจู ููุชูููุฐ ุฃูุถุงู
          # chmod +x self_heal.sh

      - name: 'Run Self-Healing Auto-Fix System'
        run: ./run_auto_fix.sh
        env:
          # ุชููู ุงููุตุงุฏูุฉ ูุฅูุดุงุก Pull Request
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          # ุชุนุฑูู ูุนูููุงุช Git ููู ุณูููู ุจุงูู commit
          GIT_AUTHOR_NAME: 'AI Auto-Fix Bot'
          GIT_AUTHOR_EMAIL: 'github-actions[bot]@users.noreply.github.com'
          GIT_COMMITTER_NAME: 'AI Auto-Fix Bot'
          GIT_COMMITTER_EMAIL: 'github-actions[bot]@users.noreply.github.com'