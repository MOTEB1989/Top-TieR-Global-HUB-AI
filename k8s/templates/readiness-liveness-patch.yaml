---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: veritas-core
spec:
  template:
    spec:
      terminationGracePeriodSeconds: 15
      containers:
      - name: veritas-core
        lifecycle: { preStop: { exec: { command: ["sh","-c","sleep 5"] } } }
        readinessProbe: { httpGet: { path: /health, port: 80 }, initialDelaySeconds: 5, periodSeconds: 5, failureThreshold: 2 }
        livenessProbe:  { httpGet: { path: /health, port: 80 }, initialDelaySeconds: 15, periodSeconds: 10 }
        env: [ { name: SAFE_MODE, value: "1" }, { name: DRY_RUN, value: "1" } ]
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: osint
spec:
  template:
    spec:
      terminationGracePeriodSeconds: 15
      containers:
      - name: osint
        lifecycle: { preStop: { exec: { command: ["sh","-c","sleep 5"] } } }
        readinessProbe: { httpGet: { path: /health, port: 80 }, initialDelaySeconds: 5, periodSeconds: 5, failureThreshold: 2 }
        livenessProbe:  { httpGet: { path: /health, port: 80 }, initialDelaySeconds: 15, periodSeconds: 10 }
        env: [ { name: SAFE_MODE, value: "1" }, { name: DRY_RUN, value: "1" } ]